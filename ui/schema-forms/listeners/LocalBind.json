{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "port": {
      "type": "integer",
      "minimum": 0,
      "maximum": 65535,
      "title": "Port",
      "description": "TCP port number (1–65535)"
    },
    "listeners": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/LocalListener"
      },
      "title": "Listeners",
      "description": "Listeners attached to this bind"
    },
    "tunnelProtocol": {
      "$ref": "#/$defs/TunnelProtocol",
      "default": "direct",
      "title": "Tunnel Protocol",
      "description": "Tunnel protocol to encapsulate connections"
    }
  },
  "additionalProperties": false,
  "required": [
    "port",
    "listeners"
  ],
  "title": "Local Bind",
  "$defs": {
    "LocalListener": {
      "type": "object",
      "properties": {
        "name": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "namespace": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Namespace",
          "description": "Kubernetes-style namespace prefix"
        },
        "hostname": {
          "description": "Can be a wildcard",
          "type": [
            "string",
            "null"
          ],
          "title": "Hostname"
        },
        "protocol": {
          "$ref": "#/$defs/LocalListenerProtocol",
          "title": "Protocol",
          "description": "Communication protocol"
        },
        "tls": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalTLSServerConfig",
              "title": "Local TLS Server Config"
            },
            {
              "type": "null"
            }
          ],
          "title": "Tls",
          "description": "TLS/SSL configuration"
        },
        "routes": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/$defs/LocalRoute"
          },
          "title": "Routes",
          "description": "HTTP routes"
        },
        "tcpRoutes": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/$defs/LocalTCPRoute"
          },
          "title": "Tcp Routes",
          "description": "TCP routes"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalGatewayPolicy",
              "title": "Local Gateway Policy"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        }
      },
      "additionalProperties": false,
      "title": "Local Listener"
    },
    "LocalListenerProtocol": {
      "type": "string",
      "title": "Local Listener Protocol",
      "oneOf": [
        {
          "const": "HTTP",
          "title": "HTTP"
        },
        {
          "const": "HTTPS",
          "title": "HTTPS"
        },
        {
          "const": "TLS",
          "title": "TLS"
        },
        {
          "const": "TCP",
          "title": "TCP"
        },
        {
          "const": "HBONE",
          "title": "HBONE"
        }
      ]
    },
    "LocalTLSServerConfig": {
      "type": "object",
      "properties": {
        "cert": {
          "type": "string",
          "title": "Cert"
        },
        "key": {
          "type": "string",
          "title": "Key"
        },
        "root": {
          "type": [
            "string",
            "null"
          ],
          "title": "Root"
        },
        "cipherSuites": {
          "description": "Optional cipher suite allowlist (order is preserved).",
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "title": "Cipher Suites"
        },
        "minTLSVersion": {
          "description": "Minimum supported TLS version (only TLS 1.2 and 1.3 are supported).",
          "anyOf": [
            {
              "$ref": "#/$defs/TLSVersion",
              "title": "TLS Version"
            },
            {
              "type": "null"
            }
          ],
          "title": "Min TLS Version"
        },
        "maxTLSVersion": {
          "description": "Maximum supported TLS version (only TLS 1.2 and 1.3 are supported).",
          "anyOf": [
            {
              "$ref": "#/$defs/TLSVersion",
              "title": "TLS Version"
            },
            {
              "type": "null"
            }
          ],
          "title": "Max TLS Version"
        }
      },
      "additionalProperties": false,
      "required": [
        "cert",
        "key"
      ],
      "title": "Local TLS Server Config"
    },
    "TLSVersion": {
      "type": "string",
      "title": "TLS Version",
      "oneOf": [
        {
          "const": "TLS_V1_0",
          "title": "TLS_V1_0"
        },
        {
          "const": "TLS_V1_1",
          "title": "TLS_V1_1"
        },
        {
          "const": "TLS_V1_2",
          "title": "TLS_V1_2"
        },
        {
          "const": "TLS_V1_3",
          "title": "TLS_V1_3"
        }
      ]
    },
    "LocalRoute": {
      "type": "object",
      "properties": {
        "name": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "namespace": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Namespace",
          "description": "Kubernetes-style namespace prefix"
        },
        "ruleName": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Rule Name",
          "description": "Optional name for this rule"
        },
        "hostnames": {
          "description": "Can be a wildcard",
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Hostnames"
        },
        "matches": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/RouteMatch"
          },
          "default": [
            {
              "path": {
                "pathPrefix": "/"
              }
            }
          ],
          "title": "Matches",
          "description": "Matching conditions — all conditions in a rule must match"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/FilterOrPolicy",
              "title": "Filter Or Policy"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        },
        "backends": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/LocalRouteBackend"
          },
          "title": "Backends",
          "description": "Backend destinations"
        }
      },
      "additionalProperties": false,
      "title": "Local Route"
    },
    "RouteMatch": {
      "type": "object",
      "properties": {
        "headers": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/HeaderMatch"
          },
          "title": "Headers",
          "description": "HTTP header match conditions"
        },
        "path": {
          "$ref": "#/$defs/PathMatch",
          "title": "Path",
          "description": "URL path match condition"
        },
        "method": {
          "type": "string",
          "title": "Method",
          "description": "HTTP method to match (GET, POST, PUT, DELETE, …)"
        },
        "query": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/QueryMatch"
          },
          "title": "Query"
        }
      },
      "additionalProperties": false,
      "required": [
        "path"
      ],
      "title": "Route Match"
    },
    "HeaderMatch": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "value": {
          "$ref": "#/$defs/HeaderValueMatch",
          "title": "Value"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "value"
      ],
      "title": "Header Match"
    },
    "HeaderValueMatch": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "exact": {
              "type": "string"
            }
          },
          "required": [
            "exact"
          ],
          "title": "Exact"
        },
        {
          "type": "object",
          "properties": {
            "regex": {
              "type": "string"
            }
          },
          "required": [
            "regex"
          ],
          "title": "Regex"
        }
      ],
      "title": "Header Value Match"
    },
    "PathMatch": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "exact": {
              "type": "string"
            }
          },
          "required": [
            "exact"
          ],
          "title": "Exact"
        },
        {
          "type": "object",
          "properties": {
            "pathPrefix": {
              "type": "string"
            }
          },
          "required": [
            "pathPrefix"
          ],
          "title": "Path Prefix"
        },
        {
          "type": "object",
          "properties": {
            "regex": {
              "type": "array",
              "prefixItems": [
                {
                  "type": "string"
                },
                {
                  "type": "integer",
                  "minimum": 0
                }
              ],
              "minItems": 2,
              "maxItems": 2
            }
          },
          "required": [
            "regex"
          ],
          "title": "Regex"
        }
      ],
      "title": "Path Match"
    },
    "QueryMatch": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "value": {
          "$ref": "#/$defs/QueryValueMatch",
          "title": "Value"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "value"
      ],
      "title": "Query Match"
    },
    "QueryValueMatch": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "exact": {
              "type": "string"
            }
          },
          "required": [
            "exact"
          ],
          "title": "Exact"
        },
        {
          "type": "object",
          "properties": {
            "regex": {
              "type": "string"
            }
          },
          "required": [
            "regex"
          ],
          "title": "Regex"
        }
      ],
      "title": "Query Value Match"
    },
    "FilterOrPolicy": {
      "type": "object",
      "properties": {
        "requestHeaderModifier": {
          "description": "Headers to be modified in the request.",
          "anyOf": [
            {
              "$ref": "#/$defs/HeaderModifier",
              "title": "Header Modifier"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Request Header Modifier"
        },
        "responseHeaderModifier": {
          "description": "Headers to be modified in the response.",
          "anyOf": [
            {
              "$ref": "#/$defs/HeaderModifier",
              "title": "Header Modifier"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Response Header Modifier"
        },
        "requestRedirect": {
          "description": "Directly respond to the request with a redirect.",
          "anyOf": [
            {
              "$ref": "#/$defs/RequestRedirect",
              "title": "Request Redirect"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Request Redirect"
        },
        "urlRewrite": {
          "description": "Modify the URL path or authority.",
          "anyOf": [
            {
              "$ref": "#/$defs/UrlRewrite",
              "title": "Url Rewrite"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Url Rewrite"
        },
        "requestMirror": {
          "description": "Mirror incoming requests to another destination.",
          "anyOf": [
            {
              "$ref": "#/$defs/RequestMirror",
              "title": "Request Mirror"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Request Mirror"
        },
        "directResponse": {
          "description": "Directly respond to the request with a static response.",
          "anyOf": [
            {
              "$ref": "#/$defs/DirectResponse",
              "title": "Direct Response"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Direct Response"
        },
        "cors": {
          "description": "Handle CORS preflight requests and append configured CORS headers to applicable requests.",
          "anyOf": [
            {
              "$ref": "#/$defs/CorsSerde",
              "title": "Cors Serde"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Cors"
        },
        "mcpAuthorization": {
          "description": "Authorization policies for MCP access.",
          "anyOf": [
            {
              "$ref": "#/$defs/McpAuthorization",
              "title": "Mcp Authorization"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Mcp Authorization"
        },
        "authorization": {
          "description": "Authorization policies for HTTP access.",
          "anyOf": [
            {
              "$ref": "#/$defs/Authorization",
              "title": "Authorization"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Authorization"
        },
        "mcpAuthentication": {
          "description": "Authentication for MCP clients.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalMcpAuthentication",
              "title": "Local Mcp Authentication"
            },
            {
              "type": "null"
            }
          ],
          "title": "Mcp Authentication"
        },
        "a2a": {
          "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
          "anyOf": [
            {
              "$ref": "#/$defs/A2aPolicy",
              "title": "A2a Policy"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "A2a"
        },
        "ai": {
          "description": "Mark this as LLM traffic to enable LLM processing.",
          "anyOf": [
            {
              "$ref": "#/$defs/Policy",
              "title": "Policy"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Ai"
        },
        "backendTLS": {
          "description": "Send TLS to the backend.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendTLS",
              "title": "Local Backend TLS"
            },
            {
              "type": "null"
            }
          ],
          "title": "Backend TLS"
        },
        "backendAuth": {
          "description": "Authenticate to the backend.",
          "anyOf": [
            {
              "$ref": "#/$defs/BackendAuth",
              "title": "Backend Auth"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Backend Auth"
        },
        "localRateLimit": {
          "description": "Rate limit incoming requests. State is kept local.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/RateLimitSpec"
          },
          "default": [],
          "title": "Local Rate Limit"
        },
        "remoteRateLimit": {
          "description": "Rate limit incoming requests. State is managed by a remote server.",
          "anyOf": [
            {
              "$ref": "#/$defs/RemoteRateLimit",
              "title": "Remote Rate Limit"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Remote Rate Limit"
        },
        "jwtAuth": {
          "description": "Authenticate incoming JWT requests.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalJwtConfig",
              "title": "Local Jwt Config"
            },
            {
              "type": "null"
            }
          ],
          "title": "Jwt Auth"
        },
        "basicAuth": {
          "description": "Authenticate incoming requests using Basic Authentication with htpasswd.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBasicAuth",
              "title": "Local Basic Auth"
            },
            {
              "type": "null"
            }
          ],
          "title": "Basic Auth"
        },
        "apiKey": {
          "description": "Authenticate incoming requests using API Keys",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalAPIKeys",
              "title": "Local API Keys"
            },
            {
              "type": "null"
            }
          ],
          "title": "Api Key"
        },
        "extAuthz": {
          "description": "Authenticate incoming requests by calling an external authorization server.",
          "anyOf": [
            {
              "$ref": "#/$defs/ExtAuthz",
              "title": "Ext Authz"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Ext Authz"
        },
        "extProc": {
          "description": "Extend agentgateway with an external processor",
          "anyOf": [
            {
              "$ref": "#/$defs/ExtProc",
              "title": "Ext Proc"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Ext Proc"
        },
        "transformations": {
          "description": "Modify requests and responses",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalTransformationConfig",
              "title": "Local Transformation Config"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Transformations"
        },
        "csrf": {
          "description": "Handle CSRF protection by validating request origins against configured allowed origins.",
          "anyOf": [
            {
              "$ref": "#/$defs/Csrf",
              "title": "Csrf"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Csrf"
        },
        "timeout": {
          "description": "Timeout requests that exceed the configured duration.",
          "anyOf": [
            {
              "$ref": "#/$defs/Policy2",
              "title": "Policy2"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Timeout"
        },
        "retry": {
          "description": "Retry matching requests.",
          "anyOf": [
            {
              "$ref": "#/$defs/Policy3",
              "title": "Policy3"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Retry"
        }
      },
      "additionalProperties": false,
      "title": "Filter Or Policy"
    },
    "HeaderModifier": {
      "type": "object",
      "properties": {
        "add": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Add"
        },
        "set": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Set"
        },
        "remove": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Remove"
        }
      },
      "additionalProperties": false,
      "title": "Header Modifier"
    },
    "RequestRedirect": {
      "type": "object",
      "properties": {
        "scheme": {
          "type": [
            "string",
            "null"
          ],
          "title": "Scheme"
        },
        "authority": {
          "anyOf": [
            {
              "$ref": "#/$defs/HostRedirect",
              "title": "Host Redirect"
            },
            {
              "type": "null"
            }
          ],
          "title": "Authority"
        },
        "path": {
          "anyOf": [
            {
              "$ref": "#/$defs/PathRedirect",
              "title": "Path Redirect"
            },
            {
              "type": "null"
            }
          ],
          "title": "Path",
          "description": "URL path match condition"
        },
        "status": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1,
          "maximum": 65535,
          "title": "Status"
        }
      },
      "additionalProperties": false,
      "title": "Request Redirect"
    },
    "HostRedirect": {
      "oneOf": [
        {
          "type": "string",
          "title": "Option 1",
          "oneOf": [
            {
              "const": "auto",
              "title": "Auto"
            },
            {
              "const": "none",
              "title": "None"
            }
          ]
        },
        {
          "type": "object",
          "properties": {
            "full": {
              "type": "string"
            }
          },
          "required": [
            "full"
          ],
          "title": "Full"
        },
        {
          "type": "object",
          "properties": {
            "host": {
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            }
          },
          "required": [
            "port"
          ],
          "title": "Port"
        }
      ],
      "title": "Host Redirect"
    },
    "PathRedirect": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "full": {
              "type": "string"
            }
          },
          "required": [
            "full"
          ],
          "title": "Full"
        },
        {
          "type": "object",
          "properties": {
            "prefix": {
              "type": "string"
            }
          },
          "required": [
            "prefix"
          ],
          "title": "Prefix"
        }
      ],
      "title": "Path Redirect"
    },
    "UrlRewrite": {
      "type": "object",
      "properties": {
        "authority": {
          "anyOf": [
            {
              "$ref": "#/$defs/HostRedirect",
              "title": "Host Redirect"
            },
            {
              "type": "null"
            }
          ],
          "title": "Authority"
        },
        "path": {
          "anyOf": [
            {
              "$ref": "#/$defs/PathRedirect",
              "title": "Path Redirect"
            },
            {
              "type": "null"
            }
          ],
          "title": "Path",
          "description": "URL path match condition"
        }
      },
      "additionalProperties": false,
      "title": "Url Rewrite"
    },
    "RequestMirror": {
      "type": "object",
      "properties": {
        "backend": {
          "$ref": "#/$defs/SimpleLocalBackend",
          "title": "Backend"
        },
        "percentage": {
          "type": "number",
          "title": "Percentage"
        }
      },
      "additionalProperties": false,
      "required": [
        "backend",
        "percentage"
      ],
      "title": "Request Mirror"
    },
    "SimpleLocalBackend": {
      "oneOf": [
        {
          "description": "Service reference. Service must be defined in the top level services list.",
          "type": "object",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "name": {
                  "$ref": "#/$defs/NamespacedHostname"
                },
                "port": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "port"
              ]
            }
          },
          "required": [
            "service"
          ],
          "title": "Service"
        },
        {
          "description": "Hostname or IP address",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or IP address",
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "backend": {
              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
              "type": "string"
            }
          },
          "required": [
            "backend"
          ],
          "title": "Backend"
        }
      ],
      "title": "Simple Local Backend"
    },
    "NamespacedHostname": {
      "type": "string",
      "pattern": "^[^/]+/[^/]+$",
      "description": "Service name in \"namespace/hostname\" format (e.g. \"default/my-service\")"
    },
    "DirectResponse": {
      "type": "object",
      "properties": {
        "body": {
          "$ref": "#/$defs/Bytes",
          "title": "Body"
        },
        "status": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535,
          "title": "Status"
        }
      },
      "additionalProperties": false,
      "required": [
        "body",
        "status"
      ],
      "title": "Direct Response"
    },
    "Bytes": {
      "type": [
        "array",
        "string"
      ],
      "items": {
        "type": "integer",
        "minimum": 0,
        "maximum": 255
      },
      "title": "Bytes"
    },
    "CorsSerde": {
      "type": "object",
      "properties": {
        "allowCredentials": {
          "type": "boolean",
          "default": false,
          "title": "Allow Credentials"
        },
        "allowHeaders": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "title": "Allow Headers"
        },
        "allowMethods": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "title": "Allow Methods"
        },
        "allowOrigins": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "title": "Allow Origins"
        },
        "exposeHeaders": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "title": "Expose Headers"
        },
        "maxAge": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Max Age"
        }
      },
      "additionalProperties": false,
      "title": "Cors Serde"
    },
    "McpAuthorization": {
      "$ref": "#/$defs/RuleSet",
      "title": "Mcp Authorization"
    },
    "RuleSet": {
      "type": "object",
      "properties": {
        "rules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Rules"
        }
      },
      "additionalProperties": false,
      "required": [
        "rules"
      ],
      "title": "Rule Set"
    },
    "Authorization": {
      "$ref": "#/$defs/RuleSet",
      "title": "Authorization"
    },
    "LocalMcpAuthentication": {
      "type": "object",
      "properties": {
        "issuer": {
          "type": "string",
          "title": "Issuer"
        },
        "audiences": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Audiences"
        },
        "provider": {
          "anyOf": [
            {
              "$ref": "#/$defs/McpIDP",
              "title": "Mcp IDP"
            },
            {
              "type": "null"
            }
          ],
          "title": "Provider"
        },
        "resourceMetadata": {
          "$ref": "#/$defs/ResourceMetadata",
          "title": "Resource Metadata"
        },
        "jwks": {
          "$ref": "#/$defs/FileInlineOrRemote",
          "title": "Jwks"
        },
        "mode": {
          "$ref": "#/$defs/McpAuthenticationMode",
          "default": "strict",
          "title": "Mode"
        }
      },
      "additionalProperties": false,
      "required": [
        "issuer",
        "audiences",
        "resourceMetadata",
        "jwks"
      ],
      "title": "Local Mcp Authentication"
    },
    "McpIDP": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "auth0": {
              "type": "object",
              "additionalProperties": false
            }
          },
          "required": [
            "auth0"
          ],
          "title": "Auth0"
        },
        {
          "type": "object",
          "properties": {
            "keycloak": {
              "type": "object",
              "additionalProperties": false
            }
          },
          "required": [
            "keycloak"
          ],
          "title": "Keycloak"
        }
      ],
      "title": "Mcp IDP"
    },
    "ResourceMetadata": {
      "type": "object",
      "additionalProperties": true,
      "title": "Resource Metadata"
    },
    "FileInlineOrRemote": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "file": {
              "type": "string"
            }
          },
          "required": [
            "file"
          ],
          "title": "File"
        },
        {
          "type": "string"
        },
        {
          "type": "object",
          "properties": {
            "url": {
              "type": "string"
            }
          },
          "required": [
            "url"
          ],
          "title": "Url"
        }
      ],
      "title": "File Inline Or Remote"
    },
    "McpAuthenticationMode": {
      "oneOf": [
        {
          "description": "A valid token, issued by a configured issuer, must be present.\nThis is the default option.",
          "type": "string",
          "const": "strict",
          "title": "Strict"
        },
        {
          "description": "If a token exists, validate it.\nWarning: this allows requests without a JWT token! Additionally, 401 errors will not be returned,\nwhich will not trigger clients to initiate an oauth flow.",
          "type": "string",
          "const": "optional",
          "title": "Optional"
        },
        {
          "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token! Additionally, 401 errors will not be returned,\nwhich will not trigger clients to initiate an oauth flow.",
          "type": "string",
          "const": "permissive",
          "title": "Permissive"
        }
      ],
      "title": "Mcp Authentication Mode"
    },
    "A2aPolicy": {
      "type": "object",
      "additionalProperties": false,
      "title": "A2a Policy"
    },
    "Policy": {
      "type": "object",
      "properties": {
        "promptGuard": {
          "anyOf": [
            {
              "$ref": "#/$defs/PromptGuard",
              "title": "Prompt Guard"
            },
            {
              "type": "null"
            }
          ],
          "title": "Prompt Guard"
        },
        "defaults": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": true,
          "title": "Defaults"
        },
        "overrides": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": true,
          "title": "Overrides"
        },
        "prompts": {
          "anyOf": [
            {
              "$ref": "#/$defs/PromptEnrichment",
              "title": "Prompt Enrichment"
            },
            {
              "type": "null"
            }
          ],
          "title": "Prompts"
        },
        "modelAliases": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Model Aliases"
        },
        "promptCaching": {
          "anyOf": [
            {
              "$ref": "#/$defs/PromptCachingConfig",
              "title": "Prompt Caching Config"
            },
            {
              "type": "null"
            }
          ],
          "title": "Prompt Caching"
        },
        "routes": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/RouteType"
          },
          "title": "Routes",
          "description": "HTTP routes"
        }
      },
      "additionalProperties": false,
      "title": "Policy"
    },
    "PromptGuard": {
      "type": "object",
      "properties": {
        "request": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/RequestGuard"
          },
          "title": "Request"
        },
        "response": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/ResponseGuard"
          },
          "title": "Response"
        }
      },
      "additionalProperties": false,
      "title": "Prompt Guard"
    },
    "RequestGuard": {
      "type": "object",
      "properties": {
        "rejection": {
          "$ref": "#/$defs/RequestRejection",
          "default": {
            "body": "The request was rejected due to inappropriate content",
            "status": 403
          },
          "title": "Rejection"
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "regex": {
              "$ref": "#/$defs/RegexRules"
            }
          },
          "required": [
            "regex"
          ],
          "title": "Regex"
        },
        {
          "type": "object",
          "properties": {
            "webhook": {
              "$ref": "#/$defs/Webhook"
            }
          },
          "required": [
            "webhook"
          ],
          "title": "Webhook"
        },
        {
          "type": "object",
          "properties": {
            "openAIModeration": {
              "$ref": "#/$defs/Moderation"
            }
          },
          "required": [
            "openAIModeration"
          ],
          "title": "Open AI Moderation"
        },
        {
          "type": "object",
          "properties": {
            "bedrockGuardrails": {
              "$ref": "#/$defs/BedrockGuardrails"
            }
          },
          "required": [
            "bedrockGuardrails"
          ],
          "title": "Bedrock Guardrails"
        },
        {
          "type": "object",
          "properties": {
            "googleModelArmor": {
              "$ref": "#/$defs/GoogleModelArmor"
            }
          },
          "required": [
            "googleModelArmor"
          ],
          "title": "Google Model Armor"
        }
      ],
      "title": "Request Guard"
    },
    "RequestRejection": {
      "type": "object",
      "properties": {
        "body": {
          "$ref": "#/$defs/Bytes",
          "default": "The request was rejected due to inappropriate content",
          "title": "Body"
        },
        "status": {
          "type": "integer",
          "minimum": 1,
          "maximum": 65535,
          "default": 403,
          "title": "Status"
        },
        "headers": {
          "description": "Optional headers to add, set, or remove from the rejection response",
          "anyOf": [
            {
              "$ref": "#/$defs/HeaderModifier",
              "title": "Header Modifier"
            },
            {
              "type": "null"
            }
          ],
          "title": "Headers"
        }
      },
      "additionalProperties": false,
      "title": "Request Rejection"
    },
    "RegexRules": {
      "type": "object",
      "properties": {
        "action": {
          "$ref": "#/$defs/Action",
          "default": "mask",
          "title": "Action"
        },
        "rules": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/RegexRule"
          },
          "title": "Rules"
        }
      },
      "additionalProperties": false,
      "required": [
        "rules"
      ],
      "title": "Regex Rules"
    },
    "Action": {
      "type": "string",
      "title": "Action",
      "oneOf": [
        {
          "const": "mask",
          "title": "Mask"
        },
        {
          "const": "reject",
          "title": "Reject"
        }
      ]
    },
    "RegexRule": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "builtin": {
              "$ref": "#/$defs/Builtin"
            }
          },
          "required": [
            "builtin"
          ],
          "title": "Builtin"
        },
        {
          "type": "object",
          "properties": {
            "pattern": {
              "type": "string"
            }
          },
          "required": [
            "pattern"
          ],
          "title": "Pattern"
        }
      ],
      "title": "Regex Rule"
    },
    "Builtin": {
      "type": "string",
      "title": "Builtin",
      "oneOf": [
        {
          "const": "ssn",
          "title": "Ssn"
        },
        {
          "const": "creditCard",
          "title": "Credit Card"
        },
        {
          "const": "phoneNumber",
          "title": "Phone Number"
        },
        {
          "const": "email",
          "title": "Email"
        },
        {
          "const": "caSin",
          "title": "Ca Sin"
        }
      ]
    },
    "Webhook": {
      "type": "object",
      "properties": {
        "target": {
          "$ref": "#/$defs/SimpleLocalBackend",
          "title": "Target",
          "description": "Resource this policy attaches to"
        },
        "forwardHeaderMatches": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/HeaderMatch"
          },
          "title": "Forward Header Matches"
        }
      },
      "additionalProperties": false,
      "required": [
        "target"
      ],
      "title": "Webhook"
    },
    "Moderation": {
      "type": "object",
      "properties": {
        "model": {
          "description": "Model to use. Defaults to `omni-moderation-latest`",
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        },
        "policies": {
          "$ref": "#/$defs/LocalBackendPolicies",
          "title": "Policies",
          "description": "Policies to apply to this resource"
        }
      },
      "additionalProperties": false,
      "required": [
        "policies"
      ],
      "title": "Moderation"
    },
    "LocalBackendPolicies": {
      "type": "object",
      "properties": {
        "requestHeaderModifier": {
          "description": "Headers to be modified in the request.",
          "anyOf": [
            {
              "$ref": "#/$defs/HeaderModifier",
              "title": "Header Modifier"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Request Header Modifier"
        },
        "responseHeaderModifier": {
          "description": "Headers to be modified in the response.",
          "anyOf": [
            {
              "$ref": "#/$defs/HeaderModifier",
              "title": "Header Modifier"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Response Header Modifier"
        },
        "requestRedirect": {
          "description": "Directly respond to the request with a redirect.",
          "anyOf": [
            {
              "$ref": "#/$defs/RequestRedirect",
              "title": "Request Redirect"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Request Redirect"
        },
        "mcpAuthorization": {
          "description": "Authorization policies for MCP access.",
          "anyOf": [
            {
              "$ref": "#/$defs/McpAuthorization",
              "title": "Mcp Authorization"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Mcp Authorization"
        },
        "a2a": {
          "description": "Mark this traffic as A2A to enable A2A processing and telemetry.",
          "anyOf": [
            {
              "$ref": "#/$defs/A2aPolicy",
              "title": "A2a Policy"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "A2a"
        },
        "ai": {
          "description": "Mark this as LLM traffic to enable LLM processing.",
          "anyOf": [
            {
              "$ref": "#/$defs/Policy",
              "title": "Policy"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Ai"
        },
        "backendTLS": {
          "description": "Send TLS to the backend.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendTLS",
              "title": "Local Backend TLS"
            },
            {
              "type": "null"
            }
          ],
          "title": "Backend TLS"
        },
        "backendAuth": {
          "description": "Authenticate to the backend.",
          "anyOf": [
            {
              "$ref": "#/$defs/BackendAuth",
              "title": "Backend Auth"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Backend Auth"
        },
        "http": {
          "description": "Specify HTTP settings for the backend",
          "anyOf": [
            {
              "$ref": "#/$defs/HTTP",
              "title": "HTTP"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Http"
        },
        "tcp": {
          "description": "Specify TCP settings for the backend",
          "anyOf": [
            {
              "$ref": "#/$defs/TCP",
              "title": "TCP"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Tcp"
        }
      },
      "additionalProperties": false,
      "title": "Local Backend Policies"
    },
    "LocalBackendTLS": {
      "type": "object",
      "properties": {
        "cert": {
          "type": [
            "string",
            "null"
          ],
          "title": "Cert"
        },
        "key": {
          "type": [
            "string",
            "null"
          ],
          "title": "Key"
        },
        "root": {
          "type": [
            "string",
            "null"
          ],
          "title": "Root"
        },
        "hostname": {
          "type": [
            "string",
            "null"
          ],
          "title": "Hostname",
          "description": "Hostname or domain to match (wildcards like *.example.com are supported)"
        },
        "insecure": {
          "type": "boolean",
          "default": false,
          "title": "Insecure"
        },
        "insecureHost": {
          "type": "boolean",
          "default": false,
          "title": "Insecure Host"
        },
        "alpn": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "default": null,
          "title": "Alpn"
        },
        "subjectAltNames": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "default": null,
          "title": "Subject Alt Names"
        }
      },
      "additionalProperties": false,
      "title": "Local Backend TLS"
    },
    "BackendAuth": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "passthrough": {
              "type": "object",
              "additionalProperties": false
            }
          },
          "required": [
            "passthrough"
          ],
          "title": "Passthrough"
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "$ref": "#/$defs/FileOrInline"
            }
          },
          "required": [
            "key"
          ],
          "title": "Key"
        },
        {
          "type": "object",
          "properties": {
            "gcp": {
              "$ref": "#/$defs/GcpAuth"
            }
          },
          "required": [
            "gcp"
          ],
          "title": "Gcp"
        },
        {
          "type": "object",
          "properties": {
            "aws": {
              "$ref": "#/$defs/AwsAuth"
            }
          },
          "required": [
            "aws"
          ],
          "title": "Aws"
        },
        {
          "type": "object",
          "properties": {
            "azure": {
              "$ref": "#/$defs/AzureAuth"
            }
          },
          "required": [
            "azure"
          ],
          "title": "Azure"
        }
      ],
      "title": "Backend Auth"
    },
    "FileOrInline": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "file": {
              "type": "string"
            }
          },
          "required": [
            "file"
          ],
          "title": "File"
        },
        {
          "type": "string"
        }
      ],
      "title": "File Or Inline"
    },
    "GcpAuth": {
      "anyOf": [
        {
          "description": "Fetch an id token",
          "type": "object",
          "properties": {
            "type": {
              "$ref": "#/$defs/IdToken"
            },
            "audience": {
              "description": "Audience for the token. If not set, the destination host will be used.",
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "type"
          ],
          "title": "Type"
        },
        {
          "description": "Fetch an access token",
          "type": "object",
          "properties": {
            "type": {
              "anyOf": [
                {
                  "$ref": "#/$defs/AccessToken"
                },
                {
                  "type": "null"
                }
              ],
              "default": null
            }
          },
          "title": "Type"
        }
      ],
      "title": "Gcp Auth"
    },
    "IdToken": {
      "type": "string",
      "const": "idToken",
      "title": "Id Token"
    },
    "AccessToken": {
      "type": "string",
      "const": "accessToken",
      "title": "Access Token"
    },
    "AwsAuth": {
      "anyOf": [
        {
          "description": "Use explicit AWS credentials",
          "type": "object",
          "properties": {
            "accessKeyId": {
              "type": "string"
            },
            "secretAccessKey": {
              "type": "string"
            },
            "region": {
              "type": [
                "string",
                "null"
              ]
            },
            "sessionToken": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "accessKeyId",
            "secretAccessKey"
          ],
          "title": "Access Key Id"
        },
        {
          "description": "Use implicit AWS authentication (environment variables, IAM roles, etc.)",
          "type": "object"
        }
      ],
      "title": "Aws Auth"
    },
    "AzureAuth": {
      "oneOf": [
        {
          "description": "Use explicit Azure credentials",
          "type": "object",
          "properties": {
            "explicitConfig": {
              "type": "object",
              "oneOf": [
                {
                  "type": "object",
                  "properties": {
                    "clientSecret": {
                      "type": "object",
                      "properties": {
                        "tenant_id": {
                          "type": "string"
                        },
                        "client_id": {
                          "type": "string"
                        },
                        "client_secret": {
                          "type": "string"
                        }
                      },
                      "additionalProperties": false,
                      "required": [
                        "tenant_id",
                        "client_id",
                        "client_secret"
                      ]
                    }
                  },
                  "required": [
                    "clientSecret"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "managedIdentity": {
                      "type": "object",
                      "properties": {
                        "userAssignedIdentity": {
                          "anyOf": [
                            {
                              "$ref": "#/$defs/AzureUserAssignedIdentity"
                            },
                            {
                              "type": "null"
                            }
                          ]
                        }
                      },
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "managedIdentity"
                  ]
                },
                {
                  "type": "object",
                  "properties": {
                    "workloadIdentity": {
                      "type": "object",
                      "additionalProperties": false
                    }
                  },
                  "required": [
                    "workloadIdentity"
                  ]
                }
              ]
            }
          },
          "required": [
            "explicitConfig"
          ],
          "title": "Explicit Config"
        },
        {
          "description": "Use implicit Azure auth. Note that this is for developer use-cases only!",
          "type": "object",
          "properties": {
            "developerImplicit": {
              "type": "object",
              "additionalProperties": false
            }
          },
          "required": [
            "developerImplicit"
          ],
          "title": "Developer Implicit"
        }
      ],
      "title": "Azure Auth"
    },
    "AzureUserAssignedIdentity": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "clientId": {
              "type": "string"
            }
          },
          "required": [
            "clientId"
          ],
          "title": "Client Id"
        },
        {
          "type": "object",
          "properties": {
            "objectId": {
              "type": "string"
            }
          },
          "required": [
            "objectId"
          ],
          "title": "Object Id"
        },
        {
          "type": "object",
          "properties": {
            "resourceId": {
              "type": "string"
            }
          },
          "required": [
            "resourceId"
          ],
          "title": "Resource Id"
        }
      ],
      "title": "Azure User Assigned Identity"
    },
    "HTTP": {
      "type": "object",
      "properties": {
        "version": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Version"
        },
        "requestTimeout": {
          "type": [
            "string",
            "null"
          ],
          "title": "Request Timeout"
        }
      },
      "additionalProperties": false,
      "title": "HTTP"
    },
    "TCP": {
      "type": "object",
      "properties": {
        "keepalives": {
          "$ref": "#/$defs/KeepaliveConfig",
          "title": "Keepalives"
        },
        "connectTimeout": {
          "$ref": "#/$defs/Duration",
          "title": "Connect Timeout"
        }
      },
      "additionalProperties": false,
      "required": [
        "keepalives",
        "connectTimeout"
      ],
      "title": "TCP"
    },
    "KeepaliveConfig": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true,
          "title": "Enabled"
        },
        "time": {
          "type": "string",
          "default": "3m0s",
          "title": "Time"
        },
        "interval": {
          "type": "string",
          "default": "3m0s",
          "title": "Interval"
        },
        "retries": {
          "type": "integer",
          "minimum": 0,
          "default": 9,
          "title": "Retries"
        }
      },
      "additionalProperties": false,
      "title": "Keepalive Config"
    },
    "Duration": {
      "type": "object",
      "properties": {
        "secs": {
          "type": "integer",
          "minimum": 0,
          "title": "Secs"
        },
        "nanos": {
          "type": "integer",
          "minimum": 0,
          "title": "Nanos"
        }
      },
      "required": [
        "secs",
        "nanos"
      ],
      "title": "Duration"
    },
    "BedrockGuardrails": {
      "description": "Configuration for AWS Bedrock Guardrails integration.",
      "type": "object",
      "properties": {
        "guardrailIdentifier": {
          "description": "The unique identifier of the guardrail",
          "type": "string",
          "title": "Guardrail Identifier"
        },
        "guardrailVersion": {
          "description": "The version of the guardrail",
          "type": "string",
          "title": "Guardrail Version"
        },
        "region": {
          "description": "AWS region where the guardrail is deployed",
          "type": "string",
          "title": "Region"
        },
        "policies": {
          "description": "Backend policies for AWS authentication (optional, defaults to implicit AWS auth)",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendPolicies",
              "title": "Local Backend Policies"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies"
        }
      },
      "additionalProperties": false,
      "required": [
        "guardrailIdentifier",
        "guardrailVersion",
        "region"
      ],
      "title": "Bedrock Guardrails"
    },
    "GoogleModelArmor": {
      "description": "Configuration for Google Cloud Model Armor integration.",
      "type": "object",
      "properties": {
        "templateId": {
          "description": "The template ID for the Model Armor configuration",
          "type": "string",
          "title": "Template Id"
        },
        "projectId": {
          "description": "The GCP project ID",
          "type": "string",
          "title": "Project Id"
        },
        "location": {
          "description": "The GCP region (default: us-central1)",
          "type": [
            "string",
            "null"
          ],
          "title": "Location"
        },
        "policies": {
          "description": "Backend policies for GCP authentication (optional, defaults to implicit GCP auth)",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendPolicies",
              "title": "Local Backend Policies"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies"
        }
      },
      "additionalProperties": false,
      "required": [
        "templateId",
        "projectId"
      ],
      "title": "Google Model Armor"
    },
    "ResponseGuard": {
      "type": "object",
      "properties": {
        "rejection": {
          "$ref": "#/$defs/RequestRejection",
          "default": {
            "body": "The request was rejected due to inappropriate content",
            "status": 403
          },
          "title": "Rejection"
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "regex": {
              "$ref": "#/$defs/RegexRules"
            }
          },
          "required": [
            "regex"
          ],
          "title": "Regex"
        },
        {
          "type": "object",
          "properties": {
            "webhook": {
              "$ref": "#/$defs/Webhook"
            }
          },
          "required": [
            "webhook"
          ],
          "title": "Webhook"
        },
        {
          "type": "object",
          "properties": {
            "bedrockGuardrails": {
              "$ref": "#/$defs/BedrockGuardrails"
            }
          },
          "required": [
            "bedrockGuardrails"
          ],
          "title": "Bedrock Guardrails"
        },
        {
          "type": "object",
          "properties": {
            "googleModelArmor": {
              "$ref": "#/$defs/GoogleModelArmor"
            }
          },
          "required": [
            "googleModelArmor"
          ],
          "title": "Google Model Armor"
        }
      ],
      "title": "Response Guard"
    },
    "PromptEnrichment": {
      "type": "object",
      "properties": {
        "append": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/SimpleChatCompletionMessage"
          },
          "title": "Append"
        },
        "prepend": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/SimpleChatCompletionMessage"
          },
          "title": "Prepend"
        }
      },
      "additionalProperties": false,
      "minProperties": 1,
      "title": "Prompt Enrichment"
    },
    "SimpleChatCompletionMessage": {
      "description": "SimpleChatCompletionMessage is a simplified chat message",
      "type": "object",
      "properties": {
        "role": {
          "type": "string",
          "title": "Role"
        },
        "content": {
          "type": "string",
          "title": "Content"
        }
      },
      "additionalProperties": false,
      "required": [
        "role",
        "content"
      ],
      "title": "Simple Chat Completion Message"
    },
    "PromptCachingConfig": {
      "type": "object",
      "properties": {
        "cacheSystem": {
          "type": "boolean",
          "default": true,
          "title": "Cache System"
        },
        "cacheMessages": {
          "type": "boolean",
          "default": true,
          "title": "Cache Messages"
        },
        "cacheTools": {
          "type": "boolean",
          "default": false,
          "title": "Cache Tools"
        },
        "minTokens": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0,
          "default": 1024,
          "title": "Min Tokens"
        }
      },
      "additionalProperties": false,
      "title": "Prompt Caching Config"
    },
    "RouteType": {
      "oneOf": [
        {
          "description": "OpenAI /v1/chat/completions",
          "type": "string",
          "const": "completions",
          "title": "Completions"
        },
        {
          "description": "Anthropic /v1/messages",
          "type": "string",
          "const": "messages",
          "title": "Messages"
        },
        {
          "description": "OpenAI /v1/models",
          "type": "string",
          "const": "models",
          "title": "Models"
        },
        {
          "description": "Send the request to the upstream LLM provider as-is",
          "type": "string",
          "const": "passthrough",
          "title": "Passthrough"
        },
        {
          "description": "OpenAI /responses",
          "type": "string",
          "const": "responses",
          "title": "Responses"
        },
        {
          "description": "OpenAI /embeddings",
          "type": "string",
          "const": "embeddings",
          "title": "Embeddings"
        },
        {
          "description": "OpenAI /realtime (websockets)",
          "type": "string",
          "const": "realtime",
          "title": "Realtime"
        },
        {
          "description": "Anthropic /v1/messages/count_tokens",
          "type": "string",
          "const": "anthropicTokenCount",
          "title": "Anthropic Token Count"
        }
      ],
      "title": "Route Type"
    },
    "RateLimitSpec": {
      "type": "object",
      "properties": {
        "maxTokens": {
          "type": "integer",
          "minimum": 0,
          "default": 0,
          "title": "Max Tokens"
        },
        "tokensPerFill": {
          "type": "integer",
          "minimum": 0,
          "default": 0,
          "title": "Tokens Per Fill"
        },
        "fillInterval": {
          "type": "string",
          "title": "Fill Interval"
        },
        "type": {
          "$ref": "#/$defs/RateLimitType",
          "default": "requests",
          "title": "Type"
        }
      },
      "additionalProperties": false,
      "required": [
        "fillInterval"
      ],
      "title": "Rate Limit Spec"
    },
    "RateLimitType": {
      "type": "string",
      "title": "Rate Limit Type",
      "oneOf": [
        {
          "const": "requests",
          "title": "Requests"
        },
        {
          "const": "tokens",
          "title": "Tokens"
        }
      ]
    },
    "RemoteRateLimit": {
      "type": "object",
      "properties": {
        "domain": {
          "type": "string",
          "title": "Domain"
        },
        "descriptors": {
          "$ref": "#/$defs/DescriptorSet",
          "title": "Descriptors"
        },
        "timeout": {
          "description": "Timeout for the request",
          "type": [
            "string",
            "null"
          ],
          "title": "Timeout"
        }
      },
      "required": [
        "domain",
        "descriptors"
      ],
      "oneOf": [
        {
          "description": "Service reference. Service must be defined in the top level services list.",
          "type": "object",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "name": {
                  "$ref": "#/$defs/NamespacedHostname"
                },
                "port": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "port"
              ]
            }
          },
          "required": [
            "service"
          ],
          "title": "Service"
        },
        {
          "description": "Hostname or IP address",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or IP address",
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "backend": {
              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
              "type": "string"
            }
          },
          "required": [
            "backend"
          ],
          "title": "Backend"
        }
      ],
      "title": "Remote Rate Limit"
    },
    "DescriptorSet": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/DescriptorEntry"
      },
      "title": "Descriptor Set"
    },
    "DescriptorEntry": {
      "type": "object",
      "properties": {
        "entries": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/KV"
          },
          "title": "Entries"
        },
        "type": {
          "$ref": "#/$defs/RateLimitType",
          "default": "requests",
          "title": "Type"
        }
      },
      "additionalProperties": false,
      "required": [
        "entries"
      ],
      "title": "Descriptor Entry"
    },
    "KV": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string",
          "title": "Key"
        },
        "value": {
          "type": "string",
          "title": "Value"
        }
      },
      "required": [
        "key",
        "value"
      ],
      "title": "KV"
    },
    "LocalJwtConfig": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "mode": {
              "$ref": "#/$defs/Mode",
              "default": "optional"
            },
            "providers": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/ProviderConfig"
              }
            }
          },
          "required": [
            "providers"
          ],
          "title": "Mode"
        },
        {
          "type": "object",
          "properties": {
            "mode": {
              "$ref": "#/$defs/Mode",
              "default": "optional"
            },
            "issuer": {
              "type": "string"
            },
            "audiences": {
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "string"
              }
            },
            "jwks": {
              "$ref": "#/$defs/FileInlineOrRemote"
            }
          },
          "required": [
            "issuer",
            "jwks"
          ],
          "title": "Mode"
        }
      ],
      "title": "Local Jwt Config"
    },
    "Mode": {
      "oneOf": [
        {
          "description": "A valid token, issued by a configured issuer, must be present.",
          "type": "string",
          "const": "strict",
          "title": "Strict"
        },
        {
          "description": "If a token exists, validate it.\nThis is the default option.\nWarning: this allows requests without a JWT token!",
          "type": "string",
          "const": "optional",
          "title": "Optional"
        },
        {
          "description": "Requests are never rejected. This is useful for usage of claims in later steps (authorization, logging, etc).\nWarning: this allows requests without a JWT token!",
          "type": "string",
          "const": "permissive",
          "title": "Permissive"
        }
      ],
      "title": "Mode"
    },
    "ProviderConfig": {
      "type": "object",
      "properties": {
        "issuer": {
          "type": "string",
          "title": "Issuer"
        },
        "audiences": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "title": "Audiences"
        },
        "jwks": {
          "$ref": "#/$defs/FileInlineOrRemote",
          "title": "Jwks"
        }
      },
      "additionalProperties": false,
      "required": [
        "issuer",
        "jwks"
      ],
      "title": "Provider Config"
    },
    "LocalBasicAuth": {
      "type": "object",
      "properties": {
        "htpasswd": {
          "description": ".htpasswd file contents/reference",
          "$ref": "#/$defs/FileOrInline",
          "title": "Htpasswd"
        },
        "realm": {
          "description": "Realm name for the WWW-Authenticate header",
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Realm"
        },
        "mode": {
          "description": "Validation mode for basic authentication",
          "$ref": "#/$defs/Mode2",
          "default": "optional",
          "title": "Mode"
        }
      },
      "additionalProperties": false,
      "required": [
        "htpasswd"
      ],
      "title": "Local Basic Auth"
    },
    "Mode2": {
      "description": "Validation mode for basic authentication",
      "oneOf": [
        {
          "description": "A valid username/password must be present.",
          "type": "string",
          "const": "strict",
          "title": "Strict"
        },
        {
          "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
          "type": "string",
          "const": "optional",
          "title": "Optional"
        }
      ],
      "title": "Mode2"
    },
    "LocalAPIKeys": {
      "type": "object",
      "properties": {
        "keys": {
          "description": "List of API keys",
          "type": "array",
          "items": {
            "$ref": "#/$defs/LocalAPIKey"
          },
          "title": "Keys"
        },
        "mode": {
          "description": "Validation mode for API keys",
          "$ref": "#/$defs/Mode3",
          "default": "optional",
          "title": "Mode"
        }
      },
      "additionalProperties": false,
      "required": [
        "keys"
      ],
      "title": "Local API Keys"
    },
    "LocalAPIKey": {
      "type": "object",
      "properties": {
        "key": {
          "$ref": "#/$defs/APIKey",
          "title": "Key"
        },
        "metadata": true
      },
      "additionalProperties": false,
      "required": [
        "key"
      ],
      "title": "Local API Key"
    },
    "APIKey": {
      "type": "string",
      "title": "API Key"
    },
    "Mode3": {
      "description": "Validation mode for API Key authentication",
      "oneOf": [
        {
          "description": "A valid API Key must be present.",
          "type": "string",
          "const": "strict",
          "title": "Strict"
        },
        {
          "description": "If credentials exist, validate them.\nThis is the default option.\nWarning: this allows requests without credentials!",
          "type": "string",
          "const": "optional",
          "title": "Optional"
        }
      ],
      "title": "Mode3"
    },
    "ExtAuthz": {
      "type": "object",
      "properties": {
        "protocol": {
          "description": "The ext_authz protocol to use. Unless you need to integrate with an HTTP-only server, gRPC is recommended.",
          "$ref": "#/$defs/Protocol2",
          "default": {
            "grpc": {}
          },
          "title": "Protocol"
        },
        "failureMode": {
          "description": "Behavior when the authorization service is unavailable or returns an error",
          "$ref": "#/$defs/FailureMode",
          "default": "deny",
          "title": "Failure Mode"
        },
        "includeRequestHeaders": {
          "description": "Specific headers to include in the authorization request.\nIf unset, the gRPC protocol sends all request headers. The HTTP protocol sends only 'Authorization'.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/HeaderOrPseudo"
          },
          "title": "Include Request Headers"
        },
        "includeRequestBody": {
          "description": "Options for including the request body in the authorization request",
          "anyOf": [
            {
              "$ref": "#/$defs/BodyOptions",
              "title": "Body Options"
            },
            {
              "type": "null"
            }
          ],
          "title": "Include Request Body"
        },
        "timeout": {
          "description": "Timeout for the authorization request (default: 200ms)",
          "type": [
            "string",
            "null"
          ],
          "title": "Timeout"
        }
      },
      "oneOf": [
        {
          "description": "Service reference. Service must be defined in the top level services list.",
          "type": "object",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "name": {
                  "$ref": "#/$defs/NamespacedHostname"
                },
                "port": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "port"
              ]
            }
          },
          "required": [
            "service"
          ],
          "title": "Service"
        },
        {
          "description": "Hostname or IP address",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or IP address",
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "backend": {
              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
              "type": "string"
            }
          },
          "required": [
            "backend"
          ],
          "title": "Backend"
        }
      ],
      "title": "Ext Authz"
    },
    "Protocol2": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "grpc": {
              "type": "object",
              "properties": {
                "context": {
                  "description": "Additional context to send to the authorization service.\nThis maps to the `context_extensions` field of the request, and only allows static values.",
                  "type": [
                    "object",
                    "null"
                  ],
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "metadata": {
                  "description": "Additional metadata to send to the authorization service.\nThis maps to the `metadata_context.filter_metadata` field of the request, and allows dynamic CEL expressions.\nIf unset, by default the `envoy.filters.http.jwt_authn` key is set if the JWT policy is used as well, for compatibility.",
                  "type": [
                    "object",
                    "null"
                  ],
                  "additionalProperties": {
                    "$ref": "#/$defs/Expression"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "required": [
            "grpc"
          ],
          "title": "Grpc"
        },
        {
          "type": "object",
          "properties": {
            "http": {
              "type": "object",
              "properties": {
                "path": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Expression"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "redirect": {
                  "description": "When using the HTTP protocol, and the server returns unauthorized, redirect to the URL resolved by\nthe provided expression rather than directly returning the error.",
                  "anyOf": [
                    {
                      "$ref": "#/$defs/Expression"
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "includeResponseHeaders": {
                  "description": "Specific headers from the authorization response will be copied into the request to the backend.",
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "addRequestHeaders": {
                  "description": "Specific headers to add in the authorization request (empty = all headers), based on the expression",
                  "type": "object",
                  "additionalProperties": {
                    "$ref": "#/$defs/Expression"
                  }
                },
                "metadata": {
                  "description": "Metadata to include under the `extauthz` variable, based on the authorization response.",
                  "type": "object",
                  "additionalProperties": {
                    "$ref": "#/$defs/Expression"
                  }
                }
              },
              "additionalProperties": false
            }
          },
          "required": [
            "http"
          ],
          "title": "Http"
        }
      ],
      "title": "Protocol2"
    },
    "Expression": {
      "type": "string",
      "title": "Expression"
    },
    "FailureMode": {
      "oneOf": [
        {
          "type": "string",
          "title": "Option 1",
          "oneOf": [
            {
              "const": "allow",
              "title": "Allow"
            },
            {
              "const": "deny",
              "title": "Deny"
            }
          ]
        },
        {
          "type": "object",
          "properties": {
            "denyWithStatus": {
              "type": "integer",
              "minimum": 0,
              "maximum": 65535
            }
          },
          "required": [
            "denyWithStatus"
          ],
          "title": "Deny With Status"
        }
      ],
      "title": "Failure Mode"
    },
    "HeaderOrPseudo": {
      "type": "string",
      "title": "Header Or Pseudo"
    },
    "BodyOptions": {
      "type": "object",
      "properties": {
        "maxRequestBytes": {
          "description": "Maximum size of request body to buffer (default: 8192)",
          "type": "integer",
          "minimum": 0,
          "default": 0,
          "title": "Max Request Bytes"
        },
        "allowPartialMessage": {
          "description": "If true, send partial body when max_request_bytes is reached",
          "type": "boolean",
          "default": false,
          "title": "Allow Partial Message"
        },
        "packAsBytes": {
          "description": "If true, pack body as raw bytes in gRPC",
          "type": "boolean",
          "default": false,
          "title": "Pack As Bytes"
        }
      },
      "additionalProperties": false,
      "title": "Body Options"
    },
    "ExtProc": {
      "type": "object",
      "properties": {
        "failureMode": {
          "description": "Behavior when the ext_proc service is unavailable or returns an error",
          "$ref": "#/$defs/FailureMode2",
          "default": "failClosed",
          "title": "Failure Mode"
        },
        "metadataContext": {
          "description": "Additional metadata to send to the external processing service.\nMaps to the `metadata_context.filter_metadata` field in ProcessingRequest, and allows dynamic CEL expressions.",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "type": "object",
            "additionalProperties": {
              "$ref": "#/$defs/Expression"
            }
          },
          "title": "Metadata Context"
        },
        "requestAttributes": {
          "description": "Maps to the request `attributes` field in ProcessingRequest, and allows dynamic CEL expressions.",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/Expression"
          },
          "title": "Request Attributes"
        },
        "responseAttributes": {
          "description": "Maps to the response `attributes` field in ProcessingRequest, and allows dynamic CEL expressions.",
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "$ref": "#/$defs/Expression"
          },
          "title": "Response Attributes"
        }
      },
      "oneOf": [
        {
          "description": "Service reference. Service must be defined in the top level services list.",
          "type": "object",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "name": {
                  "$ref": "#/$defs/NamespacedHostname"
                },
                "port": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "port"
              ]
            }
          },
          "required": [
            "service"
          ],
          "title": "Service"
        },
        {
          "description": "Hostname or IP address",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or IP address",
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "backend": {
              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
              "type": "string"
            }
          },
          "required": [
            "backend"
          ],
          "title": "Backend"
        }
      ],
      "title": "Ext Proc"
    },
    "FailureMode2": {
      "type": "string",
      "title": "Failure Mode2",
      "oneOf": [
        {
          "const": "failClosed",
          "title": "Fail Closed"
        },
        {
          "const": "failOpen",
          "title": "Fail Open"
        }
      ]
    },
    "LocalTransformationConfig": {
      "type": "object",
      "properties": {
        "request": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalTransform",
              "title": "Local Transform"
            },
            {
              "type": "null"
            }
          ],
          "title": "Request"
        },
        "response": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalTransform",
              "title": "Local Transform"
            },
            {
              "type": "null"
            }
          ],
          "title": "Response"
        }
      },
      "additionalProperties": false,
      "title": "Local Transformation Config"
    },
    "LocalTransform": {
      "type": "object",
      "properties": {
        "add": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "default": {},
          "title": "Add"
        },
        "set": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "default": {},
          "title": "Set"
        },
        "remove": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": [],
          "title": "Remove"
        },
        "body": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Body"
        }
      },
      "additionalProperties": false,
      "title": "Local Transform"
    },
    "Csrf": {
      "type": "object",
      "properties": {
        "additionalOrigins": {
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string"
          },
          "default": [],
          "title": "Additional Origins"
        }
      },
      "additionalProperties": false,
      "title": "Csrf"
    },
    "Policy2": {
      "type": "object",
      "properties": {
        "requestTimeout": {
          "type": [
            "string",
            "null"
          ],
          "title": "Request Timeout"
        },
        "backendRequestTimeout": {
          "type": [
            "string",
            "null"
          ],
          "title": "Backend Request Timeout"
        }
      },
      "additionalProperties": false,
      "title": "Policy2"
    },
    "Policy3": {
      "type": "object",
      "properties": {
        "attempts": {
          "type": "integer",
          "minimum": 1,
          "maximum": 255,
          "default": 1,
          "title": "Attempts"
        },
        "backoff": {
          "type": [
            "string",
            "null"
          ],
          "title": "Backoff"
        },
        "codes": {
          "type": "array",
          "items": {
            "type": "integer",
            "minimum": 1,
            "maximum": 65535
          },
          "title": "Codes"
        }
      },
      "additionalProperties": false,
      "required": [
        "codes"
      ],
      "title": "Policy3"
    },
    "LocalRouteBackend": {
      "type": "object",
      "properties": {
        "weight": {
          "type": "integer",
          "minimum": 0,
          "default": 1,
          "title": "Weight",
          "description": "Load-balancing weight — higher values receive proportionally more traffic"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendPolicies",
              "title": "Local Backend Policies"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "name": {
                  "$ref": "#/$defs/NamespacedHostname"
                },
                "port": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "port"
              ]
            }
          },
          "required": [
            "service"
          ],
          "title": "Service"
        },
        {
          "type": "object",
          "properties": {
            "host": {
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "dynamic": {
              "type": "object",
              "additionalProperties": false
            }
          },
          "required": [
            "dynamic"
          ],
          "title": "Dynamic"
        },
        {
          "type": "object",
          "properties": {
            "mcp": {
              "$ref": "#/$defs/LocalMcpBackend"
            }
          },
          "required": [
            "mcp"
          ],
          "title": "Mcp"
        },
        {
          "type": "object",
          "properties": {
            "ai": {
              "$ref": "#/$defs/LocalAIBackend"
            }
          },
          "required": [
            "ai"
          ],
          "title": "Ai"
        }
      ],
      "title": "Local Route Backend"
    },
    "LocalMcpBackend": {
      "type": "object",
      "properties": {
        "targets": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/LocalMcpTarget"
          },
          "title": "Targets"
        },
        "statefulMode": {
          "$ref": "#/$defs/McpStatefulMode",
          "title": "Stateful Mode",
          "description": "Enable stateful connection tracking"
        },
        "prefixMode": {
          "anyOf": [
            {
              "$ref": "#/$defs/McpPrefixMode",
              "title": "Mcp Prefix Mode"
            },
            {
              "type": "null"
            }
          ],
          "title": "Prefix Mode"
        }
      },
      "additionalProperties": false,
      "required": [
        "targets"
      ],
      "title": "Local Mcp Backend"
    },
    "LocalMcpTarget": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendPolicies",
              "title": "Local Backend Policies"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        }
      },
      "required": [
        "name"
      ],
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "sse": {
              "type": "object",
              "properties": {
                "host": {
                  "type": "string"
                },
                "port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 65535
                },
                "path": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false,
              "required": [
                "host"
              ]
            }
          },
          "required": [
            "sse"
          ],
          "title": "Sse"
        },
        {
          "type": "object",
          "properties": {
            "mcp": {
              "type": "object",
              "properties": {
                "host": {
                  "type": "string"
                },
                "port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 65535
                },
                "path": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              },
              "additionalProperties": false,
              "required": [
                "host"
              ]
            }
          },
          "required": [
            "mcp"
          ],
          "title": "Mcp"
        },
        {
          "type": "object",
          "properties": {
            "stdio": {
              "type": "object",
              "properties": {
                "cmd": {
                  "type": "string"
                },
                "args": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "env": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "additionalProperties": false,
              "required": [
                "cmd"
              ]
            }
          },
          "required": [
            "stdio"
          ],
          "title": "Stdio"
        },
        {
          "type": "object",
          "properties": {
            "openapi": {
              "type": "object",
              "properties": {
                "host": {
                  "type": "string"
                },
                "port": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 65535
                },
                "path": {
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "schema": true
              },
              "additionalProperties": false,
              "required": [
                "host",
                "schema"
              ]
            }
          },
          "required": [
            "openapi"
          ],
          "title": "Openapi"
        }
      ],
      "title": "Local Mcp Target"
    },
    "McpStatefulMode": {
      "type": "string",
      "title": "Mcp Stateful Mode",
      "oneOf": [
        {
          "const": "stateless",
          "title": "Stateless"
        },
        {
          "const": "stateful",
          "title": "Stateful"
        }
      ]
    },
    "McpPrefixMode": {
      "type": "string",
      "title": "Mcp Prefix Mode",
      "oneOf": [
        {
          "const": "always",
          "title": "Always"
        },
        {
          "const": "conditional",
          "title": "Conditional"
        }
      ]
    },
    "LocalAIBackend": {
      "anyOf": [
        {
          "$ref": "#/$defs/LocalNamedAIProvider",
          "title": "Local Named AI Provider"
        },
        {
          "type": "object",
          "properties": {
            "groups": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/LocalAIProviders"
              }
            }
          },
          "required": [
            "groups"
          ],
          "title": "Groups"
        }
      ],
      "title": "Local AI Backend"
    },
    "LocalNamedAIProvider": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "provider": {
          "$ref": "#/$defs/AIProvider",
          "title": "Provider"
        },
        "hostOverride": {
          "type": [
            "string",
            "null"
          ],
          "title": "Host Override"
        },
        "pathOverride": {
          "type": [
            "string",
            "null"
          ],
          "title": "Path Override"
        },
        "tokenize": {
          "description": "Whether to tokenize on the request flow. This enables us to do more accurate rate limits,\nsince we know (part of) the cost of the request upfront.\nThis comes with the cost of an expensive operation.",
          "type": "boolean",
          "default": false,
          "title": "Tokenize"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendPolicies",
              "title": "Local Backend Policies"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        }
      },
      "additionalProperties": false,
      "required": [
        "name",
        "provider"
      ],
      "title": "Local Named AI Provider"
    },
    "AIProvider": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "openAI": {
              "$ref": "#/$defs/Provider"
            }
          },
          "required": [
            "openAI"
          ],
          "title": "Open AI"
        },
        {
          "type": "object",
          "properties": {
            "gemini": {
              "$ref": "#/$defs/Provider2"
            }
          },
          "required": [
            "gemini"
          ],
          "title": "Gemini"
        },
        {
          "type": "object",
          "properties": {
            "vertex": {
              "$ref": "#/$defs/Provider3"
            }
          },
          "required": [
            "vertex"
          ],
          "title": "Vertex"
        },
        {
          "type": "object",
          "properties": {
            "anthropic": {
              "$ref": "#/$defs/Provider4"
            }
          },
          "required": [
            "anthropic"
          ],
          "title": "Anthropic"
        },
        {
          "type": "object",
          "properties": {
            "bedrock": {
              "$ref": "#/$defs/Provider5"
            }
          },
          "required": [
            "bedrock"
          ],
          "title": "Bedrock"
        },
        {
          "type": "object",
          "properties": {
            "azureOpenAI": {
              "$ref": "#/$defs/Provider6"
            }
          },
          "required": [
            "azureOpenAI"
          ],
          "title": "Azure Open AI"
        }
      ],
      "title": "AI Provider"
    },
    "Provider": {
      "type": "object",
      "properties": {
        "model": {
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        }
      },
      "additionalProperties": false,
      "title": "Provider"
    },
    "Provider2": {
      "type": "object",
      "properties": {
        "model": {
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        }
      },
      "title": "Provider2"
    },
    "Provider3": {
      "type": "object",
      "properties": {
        "model": {
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        },
        "region": {
          "type": [
            "string",
            "null"
          ],
          "title": "Region"
        },
        "projectId": {
          "type": "string",
          "title": "Project Id"
        }
      },
      "additionalProperties": false,
      "required": [
        "projectId"
      ],
      "title": "Provider3"
    },
    "Provider4": {
      "type": "object",
      "properties": {
        "model": {
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        }
      },
      "additionalProperties": false,
      "title": "Provider4"
    },
    "Provider5": {
      "type": "object",
      "properties": {
        "model": {
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        },
        "region": {
          "type": "string",
          "title": "Region"
        },
        "guardrailIdentifier": {
          "type": [
            "string",
            "null"
          ],
          "title": "Guardrail Identifier"
        },
        "guardrailVersion": {
          "type": [
            "string",
            "null"
          ],
          "title": "Guardrail Version"
        }
      },
      "required": [
        "region"
      ],
      "title": "Provider5"
    },
    "Provider6": {
      "type": "object",
      "properties": {
        "model": {
          "type": [
            "string",
            "null"
          ],
          "title": "Model"
        },
        "host": {
          "type": "string",
          "title": "Host",
          "description": "Upstream address in \"host:port\" format, e.g. \"example.com:8080\""
        },
        "apiVersion": {
          "type": [
            "string",
            "null"
          ],
          "title": "Api Version"
        }
      },
      "additionalProperties": false,
      "required": [
        "host"
      ],
      "title": "Provider6"
    },
    "LocalAIProviders": {
      "type": "object",
      "properties": {
        "providers": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/LocalNamedAIProvider"
          },
          "title": "Providers"
        }
      },
      "additionalProperties": false,
      "required": [
        "providers"
      ],
      "title": "Local AI Providers"
    },
    "LocalTCPRoute": {
      "type": "object",
      "properties": {
        "name": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Name",
          "description": "Unique name for this resource"
        },
        "namespace": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Namespace",
          "description": "Kubernetes-style namespace prefix"
        },
        "ruleName": {
          "type": [
            "string",
            "null"
          ],
          "default": null,
          "title": "Rule Name",
          "description": "Optional name for this rule"
        },
        "hostnames": {
          "description": "Can be a wildcard",
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Hostnames"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/TCPFilterOrPolicy",
              "title": "TCP Filter Or Policy"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        },
        "backends": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/LocalTCPRouteBackend"
          },
          "title": "Backends",
          "description": "Backend destinations"
        }
      },
      "additionalProperties": false,
      "title": "Local TCP Route"
    },
    "TCPFilterOrPolicy": {
      "type": "object",
      "properties": {
        "backendTLS": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendTLS",
              "title": "Local Backend TLS"
            },
            {
              "type": "null"
            }
          ],
          "title": "Backend TLS"
        }
      },
      "additionalProperties": false,
      "title": "TCP Filter Or Policy"
    },
    "LocalTCPRouteBackend": {
      "type": "object",
      "properties": {
        "weight": {
          "type": "integer",
          "minimum": 0,
          "default": 1,
          "title": "Weight",
          "description": "Load-balancing weight — higher values receive proportionally more traffic"
        },
        "policies": {
          "anyOf": [
            {
              "$ref": "#/$defs/LocalTCPBackendPolicies",
              "title": "Local TCP Backend Policies"
            },
            {
              "type": "null"
            }
          ],
          "title": "Policies",
          "description": "Policies to apply to this resource"
        }
      },
      "oneOf": [
        {
          "description": "Service reference. Service must be defined in the top level services list.",
          "type": "object",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "name": {
                  "$ref": "#/$defs/NamespacedHostname"
                },
                "port": {
                  "type": "integer",
                  "minimum": 0,
                  "maximum": 65535
                }
              },
              "additionalProperties": false,
              "required": [
                "name",
                "port"
              ]
            }
          },
          "required": [
            "service"
          ],
          "title": "Service"
        },
        {
          "description": "Hostname or IP address",
          "type": "object",
          "properties": {
            "host": {
              "description": "Hostname or IP address",
              "type": "string"
            }
          },
          "required": [
            "host"
          ],
          "title": "Host"
        },
        {
          "type": "object",
          "properties": {
            "backend": {
              "description": "Explicit backend reference. Backend must be defined in the top level backends list",
              "type": "string"
            }
          },
          "required": [
            "backend"
          ],
          "title": "Backend"
        }
      ],
      "title": "Local TCP Route Backend"
    },
    "LocalTCPBackendPolicies": {
      "type": "object",
      "properties": {
        "backendTLS": {
          "description": "Send TLS to the backend.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBackendTLS",
              "title": "Local Backend TLS"
            },
            {
              "type": "null"
            }
          ],
          "title": "Backend TLS"
        }
      },
      "additionalProperties": false,
      "title": "Local TCP Backend Policies"
    },
    "LocalGatewayPolicy": {
      "type": "object",
      "properties": {
        "jwtAuth": {
          "description": "Authenticate incoming JWT requests.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalJwtConfig",
              "title": "Local Jwt Config"
            },
            {
              "type": "null"
            }
          ],
          "title": "Jwt Auth"
        },
        "extAuthz": {
          "description": "Authenticate incoming requests by calling an external authorization server.",
          "anyOf": [
            {
              "$ref": "#/$defs/ExtAuthz",
              "title": "Ext Authz"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Ext Authz"
        },
        "extProc": {
          "description": "Extend agentgateway with an external processor",
          "anyOf": [
            {
              "$ref": "#/$defs/ExtProc",
              "title": "Ext Proc"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Ext Proc"
        },
        "transformations": {
          "description": "Modify requests and responses",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalTransformationConfig",
              "title": "Local Transformation Config"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Transformations"
        },
        "basicAuth": {
          "description": "Authenticate incoming requests using Basic Authentication with htpasswd.",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalBasicAuth",
              "title": "Local Basic Auth"
            },
            {
              "type": "null"
            }
          ],
          "title": "Basic Auth"
        },
        "apiKey": {
          "description": "Authenticate incoming requests using API Keys",
          "anyOf": [
            {
              "$ref": "#/$defs/LocalAPIKeys",
              "title": "Local API Keys"
            },
            {
              "type": "null"
            }
          ],
          "title": "Api Key"
        }
      },
      "additionalProperties": false,
      "title": "Local Gateway Policy"
    },
    "TunnelProtocol": {
      "type": "string",
      "title": "Tunnel Protocol",
      "oneOf": [
        {
          "const": "direct",
          "title": "Direct"
        },
        {
          "const": "hboneWaypoint",
          "title": "Hbone Waypoint"
        },
        {
          "const": "hboneGateway",
          "title": "Hbone Gateway"
        },
        {
          "const": "proxy",
          "title": "Proxy"
        }
      ]
    }
  },
  "description": "Local Bind"
}